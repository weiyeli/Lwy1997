#《重构》读书笔记（一）

##重构原则

###什么是重构？

####名词形式的重构

对软件内部结构的一种调整，目的是在不改变软件可观察行为的前提下，提高其可理解性，降低其修改成本。

####动词形式的重构

使用一系列重构手法，在不改变软件可观察行为的前提下，修改其结构。

###为什么要重构？

####重构改进软件设计

如果没有重构，随着时间的推移，程序的设计会逐渐腐败变质。程序应该有自己的结构，每段代码都应该有他的设计意图，重构就是在整理代码，让所有的东西回到应处的位置上。就比如ViewController就应该做UI相关的操作，ViewModel就应该做数据相关的操作，View里面不应该含有业务逻辑。

设计的一个重要方向就是消除重复代码。在业务开发过程中，很多人习惯copy paste(比如我)，这也许能解决短期的需求，但是这非常不利于程序未来的修改。因为同样的改动要在多个地方进行，如果有所遗漏，系统可能不如预期那样工作。

####重构使软件更容易理解

未来程序的修改者不管是自己还是其他人，通过重构来让代码更容易阅读，可以方便自己和他人以后更快的理解代码。而且随着代码渐趋简洁，开发者更容易看到一些以前看不到的设计层次的东西。

####重构帮助找到bug

> Kent Back：“我不是个伟大的程序员，我只是个有着一些优秀习惯的好程序员”。

####重构提高编程速度

良好的设计是快速开发的根本。

###何时重构

重构不是一件应该特别拨出时间做的事情，重构应该随时随地进行。我们不应该为重构而重构，之所以重构，是因为我们想做别的什么事，而重构可以帮助我们把这些事做好。

####三次法则

> 事不过三，三则重构

当同样的代码出现三次以上时，就应该重构

####添加代码时重构

通过重构来让代码的添加更加容易

####修bug时重构

调试过程中运用重构，往往是为了让代码更具可读性

#### Review时重构

当别人Review我们代码发现错误的时候，我们可以进行重构。因为别人会从一个全新的角度看待我们的代码和我们的设计，可以看到我们看不到的或者是遗漏的东西。

###间接层和重构

> 计算机科学是这样一门科学：它相信所有问题都已通过增加一个间接层来解决。

间接层具有以下价值：

1. 允许逻辑共享（提炼函数）
2. 分开解释意图和实现（函数命名）
3. 隔离变化（面向抽象编程）
4. 封装条件逻辑

